<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Lat e Long</title>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.4.4.min.js"></script>
    <script type="text/javascript">


var ender;

	  //  $('#txtInfo').val('ssender');
	    
//var txtInfo = ender;
//$('#txtInfo').val(ender);
	    
		  function recebeend()	{

ender = 'RUA ANGELO FRANCISCHETT, 121, CASA BRANCA - SP - Brasil';
$('#txtInfo').val('xcvxcvxcv');

//ender = 'RUA ANGELO FRANCISCHETT, 121, CASA BRANCA - SP - Brasil';
//var txtInfo = ender;
//alert("txtInfo: "+txtInfo);
//alert("ender: "+ender);	  
	
//alert("2 txtInfo: "+$('#txtInfo').val());	

//$('#txtInfo').val(ender);
alert("3 txtInfo: "+$('#txtInfo').val());	


		}

 function obterGeolocalizacao()	{

	 alert("obterGeolocalizacao: "+txtInfo);
	
							if (!navigator.geolocation) {
								alert("1");
				$('#txtInfo').val('Não foi possível obter a sua geolocalização');
				return;
			}

			if (location.protocol != 'https:') {
				alert("2");
				$('#txtInfo').val('Só é permitido obter a geolocalização em sites https');
				return;
			}

	 alert("obtendo geolocalização...");
			$('#txtInfo').val('obtendo geolocalização...');

			navigator.geolocation.getCurrentPosition(function (position) {

				 alert(" getCurrentPosition...");
	

				var texto = 'ok';
				alert("ok");

				$('#txtInfo').val(texto);
			});
	 alert("fim");
		}
		
		
    </script>
</head>

<body>
<textarea id="txtInfo" name="txtInfo" rows="6" cols="50"></textarea> 
<input type="button" value="Receve end" onclick="recebeend();" />
<input type="button" value="2 Obter geolocalização" onclick="obterGeolocalizacao();" />
</body>

</html>
